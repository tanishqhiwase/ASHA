<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Login</title>
		<link rel="stylesheet" type="text/css" href="login.css" />
		<link
			href="https://fonts.googleapis.com/css2?family=Rhodium+Libre&display=swap"
			rel="stylesheet"
		/>

		<!-- <script type="module">
			import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js'
			import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.11.1/firebase-analytics.js'
			import {
				getAuth,
				signInWithEmailAndPassword,
			} from 'https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js'
			const firebaseConfig = {
				apiKey: 'AIzaSyAZN3Xu-yLHf60PcMLIOWKrVB6j0yyq348',
				authDomain: 'asha-edai.firebaseapp.com',
				projectId: 'asha-edai',
				storageBucket: 'asha-edai.appspot.com',
				messagingSenderId: '242145789639',
				appId: '1:242145789639:web:b979ec8f74d8776f7260e2',
			}

			const app = initializeApp(firebaseConfig)
			const analytics = getAnalytics(app)
			const auth = getAuth(app)

			const form = document.getElementById('login-form')
			form.addEventListener('submit', handleLogin)

			function handleLogin(event) {
				event.preventDefault()
				const email = event.target.elements.email.value
				const password = event.target.elements.password.value
				signInWithEmailAndPassword(auth, email, password)
					.then((userCredential) => {
						console.log('User UID:', userCredential.user.uid)
					})
					.catch((error) => {
						console.error('Sign-in error:', error.message)
						document.getElementById('error-message').innerText =
							'Wrong email or password.'
					})
			}
		</script> -->
	</head>
	<body>
		<h5 id="company-name">ASHA HEALTH SERVICES</h5>

		<div id="top-bar">
			<img
				src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcShvU8fFgt1huGsQlPvZZwvATo5ee60qSMJVQ&usqp=CAU"
				alt="Logo"
				id="logo2"
			/>
			<a href="tanishq.html">Home</a>
			<a href="service.html">Services</a>
			<a href="whyasha.html">Why Asha?</a>
			<a href="contact.html">Contact Us</a>
		</div>
		<div id="content"></div>
		<style>
			.ellipse1 {
				position: absolute;
				top: 9rem;
				right: 0;
				width: 30rem;
				height: 30rem;
				background-color: rgba(121, 229, 112, 0.4);
				border-radius: 0 0 100% 0;
				transform: rotate(90deg);
				z-index: -1;
			}
		</style>
		<div class="ellipse1"></div>
		<style>
			.ellipse2 {
				position: absolute;
				bottom: 0;
				left: 0;
				width: 30rem;
				height: 30rem;
				background-color: rgba(121, 229, 112, 0.4);
				border-radius: 0 0 100% 0;
				transform: rotate(270deg);
				z-index: -1;
			}
		</style>
		<div class="ellipse2"></div>
		<div class="login-box">
			<div class="left-side">
				<div class="logo">
					<img
						src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcShvU8fFgt1huGsQlPvZZwvATo5ee60qSMJVQ&usqp=CAU"
						alt="Logo"
						id="logo"
					/>
				</div>
			</div>
			<div class="right-side">
				<h2>Log In</h2>
				<style>
					h2 {
						color: #3a9a44;
						font-family: 'Rhodium Libre', sans-serif;
						font-size: 5rem;
						margin-top: 3rem;
						text-align: center;
						-webkit-text-stroke: 18.75% #3a9a44;
					}
				</style>
				<p id="error-message" style="color: red"></p>
				<!-- <form id="login-form" action="#" method="post">
					<input
						type="email"
						name="email"
                        id="email"
						placeholder="Email"
						required
					/>
					<input
						type="password"
						name="password"
                        id="password"
						placeholder="Password"
						required
					/>
					<input type="submit" value="Login" />
				</form> -->
				<form id="loginForm">
					<input
						type="email"
						id="loginUsername"
						placeholder="Email"
						required
					/>
					<input
						type="password"
						id="loginPassword"
						placeholder="Password"
						required
					/>
					<button type="submit">Login</button>
				</form>
			</div>
		</div>
		<script defer>
			const loginForm = document.getElementById('loginForm')
			loginForm &&
				loginForm.addEventListener('submit', async (event) => {
					event.preventDefault()
					const username =
						document.getElementById('loginUsername').value
					const password =
						document.getElementById('loginPassword').value

					const response = await fetch(
						'http://localhost:5000/login',
						{
							method: 'POST',
							headers: {
								'Content-Type': 'application/json',
							},
							body: JSON.stringify({ email: username, password }),
						}
					)

					const result = await response.json()
					if (response.status === 200) {
						localStorage.setItem('token', result.token)
						alert('Login successful')
						location.href = '/myprofile.html'
					} else {
						alert(result.message)
					}
				})
		</script>
	</body>
</html>
